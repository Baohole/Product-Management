extends ../../layouts/default.pug
include ../../mixins/alert.pug


block main

    +alert-success(3000)
    +alert-fail(5000)
    if (role.permissions.includes('decentralization'))
        h1(class="mb-4") Phân quyền
        if(records)
            div(data-records=records)


        div(class="text-right")
            button(
                type="submit"
                class="btn btn-primary mb-3"
                button-submit
            ) Cập nhật
            table( 
                class="table table-hover table-sm" 
                table-permission
            )
                thead
                    tr 
                        th Tính năng 
                        each item in records
                            th(class="text-center") #{item.title}
                tbody 
                    tr(
                        data-name='id'
                        class='d-none'
                    )
                        td
                        each item in records
                            td(class="text-center d-none")
                                input(type="text" value=item.id)
                    tr
                        td(colspan=records.length + 1)
                            b Danh mục sản phẩm
                    tr(data-name="products-category-view")
                        td Xem
                        each item in records
                            td(class="text-center")
                                input(type="checkbox" )
                    tr(data-name="products-category-create")
                        td Thêm mới
                        each item in records
                            td(class="text-center")
                                input(type="checkbox" )
                    tr(data-name="products-category-edit")
                        td Chỉnh sửa
                        each item in records
                            td(class="text-center")
                                input(type="checkbox" )
                    tr(data-name="products-category-delete")
                        td Xóa
                        each item in records
                            td(class="text-center")
                                input(type="checkbox" )


                    tr
                        td(colspan="4")
                            b Sản phẩm
                    tr(data-name="products-view")
                        td Xem
                        each item in records
                            td(class="text-center")
                                input(type="checkbox")
                    tr(data-name="products-create")
                        td Thêm mới
                        each item in records
                            td(class="text-center")
                                input(type="checkbox")
                    tr(data-name="products-edit")
                        td Chỉnh sửa
                        each item in records
                            td(class="text-center")
                                input(type="checkbox")
                    tr(data-name="products-delete")
                        td Xóa
                        each item in records
                            td(class="text-center")
                                input(type="checkbox")

                    //- Nhóm quyền
                    tr
                        td(colspan="4")
                            b Nhóm quyền
                    tr(data-name="roles-view")
                        td Xem
                        each item in records
                            td(class="text-center")
                                input(type="checkbox")
                    tr(data-name="roles-create")
                        td Thêm mới
                        each item in records
                            td(class="text-center")
                                input(type="checkbox")
                    tr(data-name="roles-edit")
                        td Chỉnh sửa
                        each item in records
                            td(class="text-center")
                                input(type="checkbox")
                    tr(data-name="products-permissions-delete")
                        td Xóa
                        each item in records
                            td(class="text-center")
                                input(type="checkbox")
                    //- Phân quyền
                    tr
                        td(colspan="4")
                            b Phân quyền
                    tr(data-name="decentralization")
                        td Phân quyền
                        each item in records
                            td(class="text-center")
                                input(type="checkbox")

                    //- Danh sách tài khoản
                    tr
                        td(colspan="4")
                            b Danh sách tài khoản
                    tr(data-name="accounts-view")
                        td Xem
                        each item in records
                            td(class="text-center")
                                input(type="checkbox")
                    tr(data-name="accounts-create")
                        td Thêm mới
                        each item in records
                            td(class="text-center")
                                input(type="checkbox")
                    tr(data-name="accounts-edit")
                        td Chỉnh sửa
                        each item in records
                            td(class="text-center")
                                input(type="checkbox")
                    tr(data-name="accounts-delete")
                        td Xóa
                        each item in records
                            td(class="text-center")
                                input(type="checkbox")




        form(
            action= `${prefixAdmin}/roles/permissions?_method=PATCH` 
            id="form-role-permissions" 
            method="POST"
        )
            div(class='form-group d-none')
                input(
                    type='text'
                    class='form-control'
                    name='permissions'
                )
            
            script(src="/admin/js/roles.js")  